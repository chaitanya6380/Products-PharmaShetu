<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PharmaSethu â€“ Products</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: #f5f5f5;
      color: #333;
      line-height: 1.5;
    }

    /* Product grid section */
    .content {
      padding: 40px 60px 55px 60px;
    }
    .api-grid {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      column-gap: 28px;
      row-gap: 20px;
    }

    /* Pill cards - fully rounded capsule shape */
    .api-pill {
      padding: 0.6rem 1.25rem;
      border-radius: 10px;
      font-family: 'Inter', sans-serif;
      font-size: clamp(14px, 1.2vw + 12px, 20px);
      font-weight: 400;
      color: #1a1a1a;
      background: #fff;
      border: 1px solid #ddd;
    }
    .api-pill.tinted {
      background: #e0ecf5;
      border-color: #c8d8e8;
    }

    /* Section banner - reusable (APIs, Intermediates, Pellets) */
    .section-banner {
      background: #0060AA;
      color: #fff;
      text-align: center;
      padding: 1rem 1.5rem;
      font-family: 'Poppins', sans-serif;
      font-size: clamp(24px, 4vw + 16px, 38px);
      font-weight: 400;
      letter-spacing: 0.04em;
      border-radius: 10px;
      margin: 2.5rem 60px 0 60px;
    }

    /* Intermediates table */
    .inter-table {
      width: 100%;
      border-collapse: collapse;
      background: #fff;
      border-radius: 10px;
      overflow: hidden;
      border: 1px solid #ddd;
    }
    .inter-table thead th {
      background: #0060AA;
      color: #fff;
      font-family: 'Inter', sans-serif;
      font-size: clamp(14px, 1.2vw + 12px, 20px);
      font-weight: 600;
      padding: 0.75rem 1.25rem;
      text-align: left;
      border: 1px solid #005090;
    }
    .inter-table .group-row td {
      background: #e0ecf5;
      font-weight: 700;
      font-size: clamp(14px, 1.2vw + 12px, 20px);
      color: #0060AA;
      padding: 0.65rem 1.25rem;
      border: 1px solid #c8d8e8;
    }
    .inter-table tbody td {
      padding: 0.6rem 1.25rem;
      font-family: 'Inter', sans-serif;
      font-size: clamp(14px, 1.2vw + 12px, 20px);
      color: #1a1a1a;
      border: 1px solid #e0e0e0;
    }
    .inter-table tbody tr:hover {
      background: #f0f6fc;
    }
    .inter-table tbody tr.alt td {
      background: #f9fbfd;
    }

    /* Download CTA button */
    .cta-wrap {
      text-align: center;
      padding: 2.5rem 0 0 0;
    }
    .cta-btn {
      display: inline-flex;
      align-items: center;
      gap: 0.6rem;
      background: #0060AA;
      color: #fff;
      font-family: 'Inter', sans-serif;
      font-size: clamp(14px, 1.2vw + 12px, 20px);
      font-weight: 600;
      padding: 0.75rem 1.75rem;
      border: none;
      border-radius: 999px;
      cursor: pointer;
      text-decoration: none;
      transition: background 0.2s;
    }
    .cta-btn:hover {
      background: #004d8a;
    }
    .cta-btn svg {
      width: clamp(16px, 1.2vw + 10px, 20px);
      height: clamp(16px, 1.2vw + 10px, 20px);
      flex-shrink: 0;
    }

    /* Pellets - single 4-column table for perfect row alignment */
    .pellet-table {
      width: 100%;
      border-collapse: collapse;
      background: #fff;
      border-radius: 10px;
      overflow: hidden;
      border: 1px solid #ddd;
    }
    .pellet-table thead th {
      background: #0060AA;
      color: #fff;
      font-family: 'Inter', sans-serif;
      font-size: clamp(14px, 1.2vw + 12px, 20px);
      font-weight: 600;
      padding: 0.75rem 1.25rem;
      text-align: left;
      border: 1px solid #005090;
    }
    .pellet-table tbody td {
      padding: 0.6rem 1.25rem;
      font-family: 'Inter', sans-serif;
      font-size: clamp(14px, 1.2vw + 12px, 20px);
      color: #1a1a1a;
      border: 1px solid #e0e0e0;
      vertical-align: top;
    }
    .pellet-table tbody tr:hover {
      background: #f0f6fc;
    }
    .pellet-table tbody tr.alt td {
      background: #f9fbfd;
    }
    .pellet-table .divider {
      width: 28px;
      background: #f5f5f5;
      border: none;
      padding: 0;
    }
    .pellet-table thead .divider {
      background: #f5f5f5;
      border: none;
    }

    /* Mobile: single 2-col pellet table (stacked vertically) */
    .pellet-mobile-wrap {
      display: none;
    }
    .pellet-mobile-wrap .inter-table {
      margin-bottom: 0;
    }

    @media (max-width: 768px) {
      .pellet-desktop-wrap { display: none !important; }
      .pellet-mobile-wrap { display: block !important; }
    }
    @media (min-width: 769px) {
      .pellet-mobile-wrap { display: none !important; }
    }

    @media (max-width: 1024px) {
      .pellet-table thead th,
      .pellet-table tbody td { font-size: 16px; padding: 0.5rem 0.75rem; }
    }
    @media (max-width: 768px) {
      .api-grid { grid-template-columns: 1fr 1fr; }
      .content { padding: 30px 20px; }
      .section-banner { margin-left: 1rem; margin-right: 1rem; }
      .inter-table thead th,
      .inter-table tbody td,
      .inter-table .group-row td { font-size: 16px; }
      .api-pill { font-size: 16px; }
      .cta-btn { font-size: 16px; }
      .pellet-table thead th,
      .pellet-table tbody td { font-size: 14px; padding: 0.4rem 0.5rem; }
      .pellet-table .divider { width: 12px; }
    }
    @media (max-width: 500px) {
      .api-grid { grid-template-columns: 1fr; }
      .content { padding: 20px 16px; }
      .section-banner { margin-left: 0.5rem; margin-right: 0.5rem; }
      .section-banner { font-size: 24px; }
      .inter-table thead th,
      .inter-table tbody td,
      .inter-table .group-row td { font-size: 14px; padding: 0.5rem 0.75rem; }
      .api-pill { font-size: 14px; padding: 0.5rem 1rem; }
      .cta-btn { font-size: 14px; padding: 0.6rem 1.25rem; }
      .cta-btn svg { width: 16px; height: 16px; }
      .pellet-table thead th,
      .pellet-table tbody td { font-size: 12px; padding: 0.35rem 0.4rem; }
      .pellet-table .divider { width: 8px; }
    }
  </style>
</head>
<body>
  <!-- APIs banner -->
  <div class="section-banner">APIs</div>

  <!-- Product list - 3 columns, flowing down columns -->
  <div class="content">
    <div class="api-grid" id="apiGrid"></div>
    <div class="cta-wrap">
      <a href="#" class="cta-btn" download>
        Download Product List
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
      </a>
    </div>
  </div>

  <!-- Intermediates banner -->
  <div class="section-banner">API Intermediates</div>

  <!-- Intermediates table - grouped by parent drug -->
  <div class="content">
    <table class="inter-table" id="interTable">
      <thead>
        <tr>
          <th style="width: 75%;">Intermediate Name</th>
          <th style="width: 25%;">CAS No.</th>
        </tr>
      </thead>
      <tbody id="interBody"></tbody>
    </table>
    <div class="cta-wrap">
      <a href="#" class="cta-btn" download>
        Download Product List
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
      </a>
    </div>
  </div>

  <!-- Pellets banner -->
  <div class="section-banner">Pellets</div>

  <!-- Pellets -->
  <div class="content">
    <!-- Desktop: 4-column table -->
    <div class="pellet-desktop-wrap">
      <table class="pellet-table" id="pelletTable">
        <thead>
          <tr>
            <th>Product</th>
            <th>Percentage</th>
            <th class="divider"></th>
            <th>Product</th>
            <th>Percentage</th>
          </tr>
        </thead>
        <tbody id="pelletBody"></tbody>
      </table>
    </div>
    <!-- Mobile: 2-column table (all items stacked) -->
    <div class="pellet-mobile-wrap">
      <table class="inter-table" id="pelletTableMobile">
        <thead>
          <tr>
            <th>Product</th>
            <th>Percentage</th>
          </tr>
        </thead>
        <tbody id="pelletBodyMobile"></tbody>
      </table>
    </div>
    <div class="cta-wrap">
      <a href="#" class="cta-btn" download>
        Download Product List
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
      </a>
    </div>
  </div>

  <script>
    var API_BASE = '/api';

    function esc(s) { if (!s) return ''; var d = document.createElement('div'); d.textContent = s; return d.innerHTML; }

    // --- Load APIs ---
    fetch(API_BASE + '/apis').then(function(r) { return r.json(); }).then(function(data) {
      var products = data.map(function(a) { return a.name; });
      var cols = 3;
      var perCol = Math.ceil(products.length / cols);
      var col1 = products.slice(0, perCol);
      var col2 = products.slice(perCol, perCol * 2);
      var col3 = products.slice(perCol * 2);
      var maxRows = Math.max(col1.length, col2.length, col3.length);
      var grid = document.getElementById('apiGrid');
      grid.innerHTML = '';
      for (var r = 0; r < maxRows; r++) {
        var items = [col1[r], col2[r], col3[r]];
        var tinted = (r % 2 === 0);
        for (var c = 0; c < 3; c++) {
          var pill = document.createElement('div');
          if (items[c]) {
            pill.className = 'api-pill' + (tinted ? ' tinted' : '');
            pill.textContent = items[c];
          } else {
            pill.style.visibility = 'hidden';
            pill.className = 'api-pill';
          }
          grid.appendChild(pill);
        }
      }
    });

    // --- Load Intermediates ---
    fetch(API_BASE + '/intermediates').then(function(r) { return r.json(); }).then(function(data) {
      var tbody = document.getElementById('interBody');
      tbody.innerHTML = '';
      data.forEach(function(group) {
        var groupRow = document.createElement('tr');
        groupRow.className = 'group-row';
        groupRow.innerHTML = '<td colspan="2">' + esc(group.group) + '</td>';
        tbody.appendChild(groupRow);
        group.items.forEach(function(item, i) {
          var tr = document.createElement('tr');
          if (i % 2 === 1) tr.className = 'alt';
          tr.innerHTML = '<td>' + esc(item.name) + '</td><td>' + esc(item.cas) + '</td>';
          tbody.appendChild(tr);
        });
      });
    });

    // --- Load Pellets ---
    fetch(API_BASE + '/pellets').then(function(r) { return r.json(); }).then(function(pellets) {
      // Desktop 4-col table
      var halfIdx = Math.ceil(pellets.length / 2);
      var leftHalf = pellets.slice(0, halfIdx);
      var rightHalf = pellets.slice(halfIdx);
      var maxRows = Math.max(leftHalf.length, rightHalf.length);
      var pelletBody = document.getElementById('pelletBody');
      pelletBody.innerHTML = '';
      for (var i = 0; i < maxRows; i++) {
        var tr = document.createElement('tr');
        if (i % 2 === 1) tr.className = 'alt';
        var left = leftHalf[i];
        var right = rightHalf[i];
        tr.innerHTML =
          '<td>' + (left ? esc(left.product) : '') + '</td>' +
          '<td>' + (left ? esc(left.percentage) : '') + '</td>' +
          '<td class="divider"></td>' +
          '<td>' + (right ? esc(right.product) : '') + '</td>' +
          '<td>' + (right ? esc(right.percentage) : '') + '</td>';
        pelletBody.appendChild(tr);
      }
      // Mobile 2-col table
      var pelletBodyMobile = document.getElementById('pelletBodyMobile');
      pelletBodyMobile.innerHTML = '';
      pellets.forEach(function(item, i) {
        var tr = document.createElement('tr');
        if (i % 2 === 1) tr.className = 'alt';
        tr.innerHTML = '<td>' + esc(item.product) + '</td><td>' + esc(item.percentage) + '</td>';
        pelletBodyMobile.appendChild(tr);
      });
    });
  </script>
</body>
</html>
