<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PharmaSethu â€“ Products</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    * { box-sizing: border-box; }
    html {
      overflow-x: hidden;
      scrollbar-width: none;
    }
    html::-webkit-scrollbar { display: none; }
    body {
      overflow-x: hidden;
      overflow-y: scroll;
      scrollbar-width: none; /* Firefox */
      margin: 0;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: #f5f5f5;
      color: #333;
      line-height: 1.5;
    }
    body::-webkit-scrollbar { display: none; }

    /* Product grid section */
    .content {
      padding: 40px 60px 55px 60px;
    }
    .api-grid {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      column-gap: 28px;
      row-gap: 20px;
    }

    /* Pill cards - fully rounded capsule shape */
    .api-pill {
      padding: 0.6rem 1.25rem;
      border-radius: 10px;
      font-family: 'Inter', sans-serif;
      font-size: 16px;
      font-weight: 400;
      color: #1a1a1a;
      background: #fff;
      border: 1px solid #ddd;
    }
    .api-pill.tinted {
      background: #e0ecf5;
      border-color: #c8d8e8;
    }

    /* Section banner - reusable (APIs, Intermediates, Pellets) */
    .section-banner {
      background: #0060AA;
      color: #fff;
      text-align: center;
      padding: 1rem 1.5rem;
      font-family: 'Poppins', sans-serif;
      font-size: clamp(24px, 4vw + 16px, 38px);
      font-weight: 400;
      letter-spacing: 0.04em;
      border-radius: 10px;
      margin: 1.5rem 60px 0 60px; /* reduced top gap between sections */
    }
    .section-banner-apis,
    .section-banner-inter,
    .section-banner-pellets {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.75rem;
    }
    .section-banner-apis img {
      height: 52px;
      width: auto;
      display: block;
    }
    .section-banner-inter-icon,
    .section-banner-pellets-icon {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 56px;
      height: 56px;
      border-radius: 999px;
      background: #ffffff;
      box-shadow: 0 0 0 2px rgba(255,255,255,0.2);
    }
    .section-banner-inter-icon img,
    .section-banner-pellets-icon img {
      max-width: 80%;
      max-height: 80%;
      display: block;
    }

    /* Intermediates table */
    .inter-table {
      width: 100%;
      border-collapse: collapse;
      background: #fff;
      border-radius: 10px;
      overflow: hidden;
      border: 1px solid #ddd;
    }
    .inter-table thead th {
      background: #0060AA;
      color: #fff;
      font-family: 'Inter', sans-serif;
      font-size: 16px;
      font-weight: 600;
      padding: 0.75rem 1.25rem;
      text-align: left;
      border: 1px solid #005090;
    }
    .inter-table .group-row td {
      background: #e0ecf5;
      font-weight: 700;
      font-size: 16px;
      color: #0060AA;
      padding: 0.65rem 1.25rem;
      border: 1px solid #c8d8e8;
    }
    .inter-table tbody td {
      padding: 0.6rem 1.25rem;
      font-family: 'Inter', sans-serif;
      font-size: 16px;
      color: #1a1a1a;
      border: 1px solid #e0e0e0;
    }
    .inter-table tbody tr:hover {
      background: #f0f6fc;
    }
    .inter-table tbody tr.alt td {
      background: #f9fbfd;
    }

    /* Download CTA button */
    .cta-wrap {
      text-align: center;
      padding: 2.5rem 0 0 0;
    }
    .cta-btn {
      display: inline-flex;
      align-items: center;
      gap: 0.6rem;
      background: #0060AA;
      color: #fff;
      font-family: 'Inter', sans-serif;
      font-size: 16px;
      font-weight: 600;
      padding: 0.75rem 1.75rem;
      border: none;
      border-radius: 999px;
      cursor: pointer;
      text-decoration: none;
      transition: background 0.2s;
    }
    .cta-btn:hover {
      background: #004d8a;
    }
    .cta-btn svg {
      width: clamp(16px, 1.2vw + 10px, 20px);
      height: clamp(16px, 1.2vw + 10px, 20px);
      flex-shrink: 0;
    }

    /* Pellets - single 4-column table for perfect row alignment */
    .pellet-table {
      width: 100%;
      border-collapse: collapse;
      background: #fff;
      border-radius: 10px;
      overflow: hidden;
      border: 1px solid #ddd;
      table-layout: fixed; /* ensure consistent column widths */
    }
    .pellet-table thead th {
      background: #0060AA;
      color: #fff;
      font-family: 'Inter', sans-serif;
      font-size: 16px;
      font-weight: 600;
      padding: 0.75rem 1.25rem;
      text-align: left;
      border: 1px solid #005090;
    }
    /* Pellets column width ratio (base/mobile: Product 65%, Strength 35%) */
    .pellet-table thead th:nth-child(1),
    .pellet-table tbody td:nth-child(1) {
      width: 65%;
    }
    .pellet-table thead th:nth-child(2),
    .pellet-table tbody td:nth-child(2) {
      width: 35%;
    }
    .pellet-table tbody td {
      padding: 0.6rem 1.25rem;
      font-family: 'Inter', sans-serif;
      font-size: 16px;
      color: #1a1a1a;
      border: 1px solid #e0e0e0;
      vertical-align: top;
    }
    .pellet-table tbody tr:hover td {
      background: #f0f6fc;
    }
    .pellet-table tbody tr.alt td {
      background: #f9fbfd;
    }

    /* Desktop-only: 4-column layout (Product | Strength | Product | Strength) */
    @media (min-width: 1025px) {
      .pellet-table thead th:nth-child(1),
      .pellet-table tbody td:nth-child(1),
      .pellet-table thead th:nth-child(3),
      .pellet-table tbody td:nth-child(3) {
        width: 30%;
      }
      .pellet-table thead th:nth-child(2),
      .pellet-table tbody td:nth-child(2),
      .pellet-table thead th:nth-child(4),
      .pellet-table tbody td:nth-child(4) {
        width: 20%;
      }
    }
    .pellet-table .divider {
      width: 28px;
      background: #f5f5f5;
      border: none;
      padding: 0;
    }
    .pellet-table thead .divider {
      background: #f5f5f5;
      border: none;
    }

    @media (max-width: 1024px) {
      .pellet-table thead th,
      .pellet-table tbody td { font-size: 16px; padding: 0.5rem 0.75rem; }
    }
    @media (max-width: 768px) {
      .api-grid { grid-template-columns: 1fr 1fr; }
      .content { padding: 30px 20px; }
      .section-banner { margin-left: 1rem; margin-right: 1rem; }
      .inter-table thead th,
      .inter-table tbody td,
      .inter-table .group-row td { font-size: 16px; }
      .api-pill { font-size: 16px; }
      .cta-btn { font-size: 16px; }
      .pellet-table thead th,
      .pellet-table tbody td { font-size: 14px; padding: 0.5rem 0.75rem; }
    }
    @media (max-width: 500px) {
      .api-grid { grid-template-columns: 1fr; }
      .content { padding: 20px 16px; }
      .section-banner { margin-left: 0.5rem; margin-right: 0.5rem; }
      .section-banner { font-size: 24px; }
      .inter-table thead th,
      .inter-table tbody td,
      .inter-table .group-row td { font-size: 14px; padding: 0.5rem 0.75rem; }

      /* Keep CAS No. values on a single line on mobile and slightly smaller */
      .inter-table thead th:nth-child(2),
      .inter-table tbody td:nth-child(2) {
        white-space: nowrap;
        font-size: 12px;
      }
      .api-pill { font-size: 14px; padding: 0.5rem 1rem; }
      .cta-btn { font-size: 14px; padding: 0.6rem 1.25rem; }
      .cta-btn svg { width: 16px; height: 16px; }
      .pellet-table thead th,
      .pellet-table tbody td { font-size: 12px; padding: 0.45rem 0.6rem; }
    }
  </style>
</head>
<body>
  <!-- APIs banner -->
  <div class="section-banner section-banner-apis">
    <img src="Public/2.png" alt="APIs Icon">
    <span>APIs</span>
  </div>

  <!-- Product list - 3 columns, flowing down columns -->
  <div class="content">
    <div class="api-grid" id="apiGrid"></div>
    <div class="cta-wrap">
      <a href="coming-soon.html" target="_blank" rel="noopener noreferrer" class="cta-btn">
        Download Product List
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
      </a>
    </div>
  </div>

  <!-- Intermediates banner -->
  <div class="section-banner section-banner-inter">
    <img src="Public/4.png" alt="Intermediates Icon" style="height:52px; width:auto;">
    <span>API Intermediates</span>
  </div>

  <!-- Intermediates table - grouped by parent drug -->
  <div class="content">
    <table class="inter-table" id="interTable">
      <thead>
        <tr>
          <th style="width: 75%;">Intermediate Name</th>
          <th style="width: 25%;">CAS No.</th>
        </tr>
      </thead>
      <tbody id="interBody"></tbody>
    </table>
    <div class="cta-wrap">
      <a href="coming-soon.html" target="_blank" rel="noopener noreferrer" class="cta-btn">
        Download Product List
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
      </a>
    </div>
  </div>

  <!-- Pellets banner -->
  <div class="section-banner section-banner-pellets">
    <img src="Public/6.png" alt="Pellets Icon" style="height:52px; width:auto;">
    <span>Pellets</span>
  </div>

  <!-- Pellets - simple 2-column table (Product | Strength) -->
  <div class="content">
    <table class="pellet-table" id="pelletTable">
      <thead>
        <tr>
          <th>Product</th>
          <th>Strength</th>
        </tr>
      </thead>
      <tbody id="pelletBody"></tbody>
    </table>
    <div class="cta-wrap">
      <a href="coming-soon.html" target="_blank" rel="noopener noreferrer" class="cta-btn">
        Download Product List
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
      </a>
    </div>
  </div>

  <script>
    var API_BASE = '/api';

    function esc(s) { if (!s) return ''; var d = document.createElement('div'); d.textContent = s; return d.innerHTML; }

    // --- Fallback data (used when API is unavailable) ---
    var FALLBACK_APIS = [
      "Acebrophylline", "Aceclofenac", "Albendazole", "Allopurinol", "Ambroxol HCL", "Amlodipine Besylate",
      "Amodiaquine HCL", "Aprepitant", "Artemether", "Atenolol", "Atorvastatin Calcium", "Bisoprolol Fumarate",
      "Bromhexine Hcl", "Cefixime Trihydrate", "Cetirizine Hcl", "Chloroquine Phosphate", "Chlorpheniramine Maleate",
      "Cimetidine", "Dapoxetine", "Dapsone", "Dextromethorphan HBR", "Diclofenac Potassium", "Diclofenac Sodium",
      "Diphenhydramine", "Domperidone", "Domperidone Maleate", "Doxofylline", "Erythromycin", "Esomeprazole Magnesium Trihydrate",
      "Famotidine", "Fluconazole", "Flumequine", "Fosaprepitant Dimeglumine", "Fosphenytoin Sodium", "Furosemide",
      "Gabapentin", "Gliclazide", "Guaifenesin", "Hydrochlorothiazide", "Hydroxychloroquine Sulphate", "Hydroxyzine Hcl",
      "Ibuprofen", "Irbesartan", "Itraconazole", "Ketoconazole", "Ketoprofen", "Ketorolac Tromethamine",
      "Levocetirizine", "Lidocaine Base/HCL", "Loperamide Hcl", "Loratadine", "Losartan Potassium", "Lumefantrine",
      "Metformin Hcl", "Metoclopramide", "Minoxidil", "Mirtazapine", "Naproxen", "Nicardipine HCl",
      "Nimesulide", "Olmesartan", "Omeprazole", "Pantoprazole", "Paracetamol", "Phenylephrine Hcl",
      "Piperaquine Phosphate", "Povidone Iodine", "Pregabalin", "Primaquine Phosphate", "Pyrimethamine", "Ranitidine Hcl",
      "Ropivacaine Hcl", "Rosuvastatin Calcium", "Salbutamol Sulphate", "Sibutramine", "Sildenafil Citrate", "Silver Sulfadiazine",
      "Sulfadoxine", "Sulfamethoxazole", "Tadalafil", "Telmisartan", "Tiagabine HCL", "Torsemide",
      "Trazodone HCL", "Trimethoprim", "Valsartan", "Vardenafil HCL"
    ];

    var FALLBACK_INTERMEDIATES = [
      { group: "Ranitidine HCl Intermediates", items: [
        { name: "2-[[[5-(Dimethylamino) methyl-1,2-furanyl] methyl] thio] ethanamine", cas: "66356-53-4" },
        { name: "2-((5-((Dimethylamino)methyl)furan-2-yl)methylthio)ethanamine", cas: "66356-53-4" },
        { name: "N-Methyl-1-(methylthio)-2-nitroethenamine", cas: "61832-41-5" },
        { name: "N-[2-[[[5-(Dimethylamino) methyl] furan-2-yl] methyl] thio] ethyl]-N-methyl-2-nitroethene-1,1-diamine", cas: "66357-35-5" }
      ]},
      { group: "Famotidine Intermediates", items: [
        { name: "2-[4-(Chloromethyl) thiazol-2-yl] guanidine hydrochloride", cas: "69014-12-6" },
        { name: "N-[4-[[(Amino iminomethyl) thio]-methyl]-2-thiazolyl]-guanidine dihydrochloride", cas: "88046-01-9" },
        { name: "Sulfuric diamide", cas: "7803-58-9" },
        { name: "N-Sulfamyl-3-chloro propionamidine HCl", cas: "106649-95-0" },
        { name: "Aminoiminoethyl thiourea", cas: "2114-02-05" }
      ]},
      { group: "Mirtazapine Intermediates", items: [
        { name: "Isopropyl 2-chloronicotinate", cas: "NA" },
        { name: "(2-(4-Methyl-2-phenylpiperazin-1-yl)pyridin-3-yl)methanol", cas: "61337-89-1" },
        { name: "1-Methyl-3-phenylpiperazine", cas: "5271-27-2" }
      ]},
      { group: "Rizatriptan Intermediates", items: [
        { name: "1-(4-Nitrophenyl)methyl-1,2,4-triazole", cas: "119192-09-5" },
        { name: "4-(1H-1,2,4-Triazol-1-ylmethyl)aniline", cas: "119192-10-8" }
      ]},
      { group: "Eletriptan HBr Intermediates", items: [
        { name: "(3-[(R)-1-(Benzyloxy) carbonyl pyrrolidine-2-carbonyl)-5-bromoindole", cas: "143322-56-9" },
        { name: "5-Bromo-3-(((R)-1-methylpyrrolidin-2-yl) methyl)-1H-indole", cas: "143322-57-0" },
        { name: "Phenyl vinyl sulfone", cas: "5535-48-8" }
      ]}
    ];

    var FALLBACK_PELLETS = [
      { product: "Atorvastatin Pellets", percentage: "10%, 15%, 20%" },
      { product: "Ascorbic Acid Pellets", percentage: "70%" },
      { product: "Aspirin Pellets", percentage: "60%" },
      { product: "Carbonyl Iron Pellets", percentage: "35%, 50%, 70%" },
      { product: "Chloroquine Phosphate 250mg Pellets", percentage: "25%" },
      { product: "Chlorpheniramine Maleate Pellets", percentage: "2%, 5%" },
      { product: "Diclofenac Sodium Pellets (SR)", percentage: "40%" },
      { product: "Domperidone Pellets", percentage: "10%, 17%, 20%, 22%, 22.5%, 25%, 30%, 35%, 40%" },
      { product: "Duloxetine Hcl Pellets", percentage: "17%" },
      { product: "Esomeprazole + Domperidone (SR)", percentage: "20 mg + 30 mg" },
      { product: "Esomeprazole + Domperidone (SR)", percentage: "40 mg + 30 mg" },
      { product: "Esomeprazole + Itopride Hcl (SR)", percentage: "40 mg + 150 mg" },
      { product: "Esomeprazole + Levosulpiride (SR)", percentage: "40 mg + 75 mg" },
      { product: "Esomeprazole Pellets", percentage: "7.5%, 8.5%, 15%, 22.5%, 25%" },
      { product: "Folic Acid Pellets", percentage: "1%, 3%, 5%" },
      { product: "Indomethacin Pellets (SR)", percentage: "30%" },
      { product: "Itopride HCL Pellets (SR)", percentage: "50%, 75%" },
      { product: "Itraconazole Pellets", percentage: "20%, 22%, 40%, 44%" },
      { product: "Lansoprazole Pellets", percentage: "8.5%, 11%, 15%" },
      { product: "Levosulpiride SR Pellets", percentage: "35%, 50%, 55%, 65%, 70%" },
      { product: "Mebeverine Hcl Pellets SR", percentage: "50%, 60%, 80%" },
      { product: "Omeprazole + Domperidone (IR)", percentage: "20 mg + 10 mg" },
      { product: "Omeprazole + Domperidone (SR)", percentage: "20 mg + 30 mg" },
      { product: "Omeprazole Pellets", percentage: "7.5%, 8.5%, 10%, 11.2%, 12.5%, 15%, 22.5%" },
      { product: "Pantoprazole + Cinitapride (SR)", percentage: "40 mg + 3 mg" },
      { product: "Pantoprazole + Levosulpiride (SR)", percentage: "40 mg + 75 mg" },
      { product: "Pantoprazole Pellets", percentage: "10%, 15%, 22%, 22.5%, 25%, 30%" },
      { product: "Pantoprazole + Domperidone (IR)", percentage: "20 mg + 10 mg" },
      { product: "Pantoprazole + Domperidone (SR & IR)", percentage: "40 mg + 20 mg + 10 mg" },
      { product: "Pantoprazole + Domperidone (SR)", percentage: "40 mg + 30 mg" },
      { product: "Pantoprazole + Itopride Hcl (SR)", percentage: "40 mg + 150 mg" },
      { product: "Phenylephrine Hcl Pellets", percentage: "3%, 10%" },
      { product: "Propranolol Hcl Pellets", percentage: "40 mg" },
      { product: "Pyridoxine Hydrochloride (B6) Pellets", percentage: "1.5%, 5%" },
      { product: "Rabeprazole Pellets", percentage: "7.5%, 8.5%, 11%, 15%, 20%" },
      { product: "Rabeprazole + Aceclofenac (SR)", percentage: "20 mg + 200 mg" },
      { product: "Rabeprazole + Diclofenac (SR)", percentage: "20 mg + 100 mg" },
      { product: "Rabeprazole + Domperidone (SR & IR)", percentage: "20 mg + 20 mg + 10 mg" },
      { product: "Rabeprazole + Domperidone (SR)", percentage: "20 mg + 30 mg" },
      { product: "Rabeprazole + Itopride Hcl (SR)", percentage: "20 mg + 150 mg" },
      { product: "Rabeprazole + Levosulpiride (SR)", percentage: "20 mg + 75 mg" },
      { product: "Rosuvastatin Pellets", percentage: "10%, 15%, 20%" },
      { product: "Selenium Pellets", percentage: "1%" },
      { product: "Tamsulosine Hydrochloride + Dutasteride", percentage: "0.4 mg + 0.5 mg" },
      { product: "Tamsulosin Hcl Pellets", percentage: "0.2%, 0.4%, 0.16%" },
      { product: "Vitamin B12 Pellets", percentage: "0.20%" },
      { product: "Zinc Sulphate Monohydrate", percentage: "35%, 50%, 70%" }
    ];

    // --- Render APIs ---
    function renderApis(products) {
      if (!products || !products.length) products = FALLBACK_APIS;
      if (typeof products[0] === 'object') products = products.map(function(a) { return a.name; });

      var cols = 3;
      var perCol = Math.ceil(products.length / cols);
      var col1 = products.slice(0, perCol),
          col2 = products.slice(perCol, perCol * 2),
          col3 = products.slice(perCol * 2);
      var maxRows = Math.max(col1.length, col2.length, col3.length);

      var grid = document.getElementById('apiGrid');
      grid.innerHTML = '';

      // Alternate colours by visual order, so mobile (1 column)
      // looks the same pattern as desktop.
      var visibleIndex = 0;

      for (var r = 0; r < maxRows; r++) {
        var items = [col1[r], col2[r], col3[r]];
        for (var c = 0; c < cols; c++) {
          var pill = document.createElement('div');
          if (items[c]) {
            var tinted = (visibleIndex % 2 === 0);
            pill.className = 'api-pill' + (tinted ? ' tinted' : '');
            pill.textContent = items[c];
            visibleIndex++;
          } else {
            pill.style.visibility = 'hidden';
            pill.className = 'api-pill';
          }
          grid.appendChild(pill);
        }
      }
    }

    // --- Render Intermediates ---
    function renderIntermediates(data) {
      if (!data || !data.length) data = FALLBACK_INTERMEDIATES;
      var tbody = document.getElementById('interBody');
      tbody.innerHTML = '';
      data.forEach(function(group) {
        var groupRow = document.createElement('tr');
        groupRow.className = 'group-row';
        groupRow.innerHTML = '<td colspan="2">' + esc(group.group) + '</td>';
        tbody.appendChild(groupRow);
        group.items.forEach(function(item, i) {
          var tr = document.createElement('tr');
          if (i % 2 === 1) tr.className = 'alt';
          tr.innerHTML = '<td>' + esc(item.name) + '</td><td>' + esc(item.cas) + '</td>';
          tbody.appendChild(tr);
        });
      });
    }

    // Keep latest pellets for responsive re-rendering
    var CURRENT_PELLETS = null;

    // --- Render Pellets ---
    function renderPellets(pellets) {
      if (Array.isArray(pellets) && pellets.length) {
        CURRENT_PELLETS = pellets;
      }
      if (!Array.isArray(CURRENT_PELLETS) || !CURRENT_PELLETS.length) {
        CURRENT_PELLETS = FALLBACK_PELLETS;
      }

      var pelletTable = document.getElementById('pelletTable');
      var pelletHead = pelletTable ? pelletTable.querySelector('thead') : null;
      var pelletBody = document.getElementById('pelletBody');
      if (!pelletTable || !pelletHead || !pelletBody) return;

      pelletHead.innerHTML = '';
      pelletBody.innerHTML = '';

      var isMobile = window.innerWidth <= 768;

      if (isMobile) {
        // MOBILE/TABLET: simple 2-column table (Product | Strength)
        var headRowM = document.createElement('tr');
        headRowM.innerHTML = '<th>Product</th><th>Strength</th>';
        pelletHead.appendChild(headRowM);

        CURRENT_PELLETS.forEach(function (item, i) {
          var trM = document.createElement('tr');
          if (i % 2 === 1) trM.className = 'alt';
          trM.innerHTML =
            '<td>' + esc(item.product) + '</td>' +
            '<td>' + esc(item.percentage) + '</td>';
          pelletBody.appendChild(trM);
        });
      } else {
        // DESKTOP: 4-column table (Product | Strength | Product | Strength)
        var headRowD = document.createElement('tr');
        headRowD.innerHTML = '<th>Product</th><th>Strength</th><th>Product</th><th>Strength</th>';
        pelletHead.appendChild(headRowD);

        var half = Math.ceil(CURRENT_PELLETS.length / 2);
        for (var i = 0; i < half; i++) {
          var left = CURRENT_PELLETS[i];
          var right = CURRENT_PELLETS[i + half];
          var trD = document.createElement('tr');
          if (i % 2 === 1) trD.className = 'alt';
          trD.innerHTML =
            '<td>' + (left ? esc(left.product) : '') + '</td>' +
            '<td>' + (left ? esc(left.percentage) : '') + '</td>' +
            '<td>' + (right ? esc(right.product) : '') + '</td>' +
            '<td>' + (right ? esc(right.percentage) : '') + '</td>';
          pelletBody.appendChild(trD);
        }
      }
    }

    // Re-render pellets on resize to keep layouts in sync
    var pelletResizeTimeout;
    window.addEventListener('resize', function () {
      clearTimeout(pelletResizeTimeout);
      pelletResizeTimeout = setTimeout(function () {
        renderPellets(); // uses CURRENT_PELLETS / fallback
      }, 200);
    });

    // --- Load from API with fallback ---
    fetch(API_BASE + '/apis').then(function(r) { return r.json(); }).then(function(data) {
      renderApis(Array.isArray(data) && data.length ? data : null);
    }).catch(function() { renderApis(null); });

    fetch(API_BASE + '/intermediates').then(function(r) { return r.json(); }).then(function(data) {
      renderIntermediates(Array.isArray(data) && data.length ? data : null);
    }).catch(function() { renderIntermediates(null); });

    fetch(API_BASE + '/pellets').then(function(r) { return r.json(); }).then(function(data) {
      renderPellets(Array.isArray(data) && data.length ? data : null);
    }).catch(function() { renderPellets(null); });
  </script>
</body>
</html>
